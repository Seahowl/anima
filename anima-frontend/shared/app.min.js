var dominionApp=angular.module("dominionApp",["ui.bootstrap","ui.router"]);dominionApp.config(function(e,t){t.otherwise("/home"),e.state("home",{url:"/home",templateUrl:"./components/home/homePartial.html"}).state("about",{url:"/about",templateUrl:"./components/about/aboutPartial.html"}).state("dominion",{url:"/dominion",templateUrl:"./components/dominion/dominionPartial.html"}).state("dominion.effects",{url:"/effect/",templateUrl:"./components/dominion/effectsPartial.html",controller:"effectsController"}).state("dominion.effect",{url:"/effect/{effectId:[0-9]}",templateUrl:"./components/dominion/effectPartial.html",controller:"effectController"}).state("dominion.trees",{url:"/tree/",templateUrl:"./components/dominion/treesPartial.html",controller:"treesController"}).state("dominion.tree",{url:"/tree/{treeId:[0-9]}",templateUrl:"./components/dominion/treePartial.html",controller:"treeController"}).state("dominion.techniques",{url:"/techniques/",templateUrl:"./components/dominion/techniquesPartial.html",controller:"techniquesController"}).state("dominion.technique",{url:"/technique/{techniqueId:[0-9]}",templateUrl:"./components/dominion/techniquePartial.html",controller:"techniqueController"}).state("dominion.disadvantages",{url:"/disadvantages/",templateUrl:"./components/dominion/disadvantagesPartial.html",controller:"disadvantagesController"}).state("dominion.disadvantage",{url:"/disadvantage/{disadvantageId:[0-9]}",templateUrl:"./components/dominion/disadvantagePartial.html",controller:"disadvantageController"}).state("api",{})}),dominionApp.run(function(e,t){e.toggleHelp=function(){t[0].getElementById("help").className="hidehelp"==t[0].getElementById("help").className?"showhelp":"hidehelp"}}),dominionApp.controller("effectsController",function(e,t){getURL="/api/dominion/effects/",e.effectsJSON={},t.get(getURL,{cache:!0}).then(function(t){e.effectsJSON=t.data},function(){e.effectsJSON="error"})}),dominionApp.controller("effectController",["$scope","$http","$stateParams","$q",function(e,t,n,a){getURL="/api/dominion/effects/"+n.effectId,e.effectJSON={},t.get(getURL,{cache:!0}).then(function(o){for(e.effectJSON=o.data,abilityNames=["Strength","Dexterity","Agility","Constitution","Power","Will"],abilityCosts=[],abilityCosts[0]=e.effectJSON[0].fields.effect_str_cost,abilityCosts[1]=e.effectJSON[0].fields.effect_dex_cost,abilityCosts[2]=e.effectJSON[0].fields.effect_agi_cost,abilityCosts[3]=e.effectJSON[0].fields.effect_con_cost,abilityCosts[4]=e.effectJSON[0].fields.effect_pow_cost,abilityCosts[5]=e.effectJSON[0].fields.effect_will_cost,e.primaryStat="",e.secondaryStatList="",i=0;i<6;i++)0==abilityCosts[i]?e.primaryStat=abilityNames[i]:abilityCosts[i]>0&&(e.secondaryStatList=e.secondaryStatList+abilityNames[i]+" +"+abilityCosts[i]+"; ");getLevelsURL="/api/dominion/effects/"+n.effectId+"/levels/",e.effectLevelsJSON={},t.get(getLevelsURL,{cache:!0}).then(function(t){e.effectLevelsJSON=t.data},function(){e.effectLevelsJSON="error"});var s=[];getModifiersURL="/api/dominion/effects/"+n.effectId+"/modifiers/",e.effectModifiersJSON={},t.get(getModifiersURL,{cache:!0}).then(function(o){if(e.effectModifiersJSON=o.data,0!=o.data.length){for(i=0;i<o.data.length;i++)getModifierLevelsURL="/api/dominion/effects/"+n.effectId+"/modifiers/"+o.data[i].pk+"/levels/",s.push(t.get(getModifierLevelsURL,{cache:!0}));a.all(s).then(function(t){for(i=0;i<t.length;i++)e.effectModifiersJSON[i].levels=t[i].data},function(e){e.data[i].levels="error"})}},function(){e.effectModifiersJSON="error"})},function(){e.effectJSON="error"})}]),dominionApp.controller("treesController",function(e,t){getURL="/api/dominion/trees/",e.treesJSON={},t.get(getURL,{cache:!0}).then(function(t){e.treesJSON=t.data},function(){e.treesJSON="error"})}),dominionApp.controller("treeController",["$scope","$http","$stateParams","$q",function(e,t,n,a){getURL="/api/dominion/trees/"+n.treeId,e.treeJSON={},t.get(getURL,{cache:!0}).then(function(n){e.treeJSON=n.data;var o=[];if(0!=n.data[0].fields.techniques.length){for(e.treeTechniquesJSON=[],i=0;i<n.data[0].fields.techniques.length;i++)getTreeTechniquesURL="/api/dominion/techniques/"+n.data[0].fields.techniques[i],o.push(t.get(getTreeTechniquesURL,{cache:!0}));a.all(o).then(function(t){for(i=0;i<t.length;i++)e.treeTechniquesJSON[i]=t[i].data},function(){e.treeTechniquesJSON="error"})}},function(){e.treeJSON="error"})}]),dominionApp.controller("techniquesController",function(e,t){getURL="/api/dominion/techniques/",e.techniquesJSON={},t.get(getURL,{cache:!0}).then(function(t){e.techniquesJSON=t.data},function(){e.techniquesJSON="error"})}),dominionApp.controller("techniqueController",["$scope","$http","$stateParams","$q",function(e,t,n,a){getURL="/api/dominion/techniques/"+n.techniqueId,e.techniqueJSON={},t.get(getURL,{cache:!0}).then(function(n){e.techniqueJSON=n.data;var o=[],s=[],f=[],l=[],c=[],d=[];if(0!=n.data[0].fields.effects.length){for(e.techniqueEffectsJSON=[],techniqueEffectLevelsJSON=[],techniqueEffectModifiersJSON=[],techniqueEffectModifiersLevelsJSON=[],e.disadvantagesJSON=[],disadvantageLevelsJSON=[],i=0;i<n.data[0].fields.effects.length;i++)getEffectsURL="/api/dominion/effects/"+n.data[0].fields.effects[i],getEffectLevelsURL="/api/dominion/effects/"+n.data[0].fields.effects[i]+"/levels/"+n.data[0].fields.effect_levels[i],o.push(t.get(getEffectsURL,{cache:!0})),s.push(t.get(getEffectLevelsURL,{cache:!0}));for(i=0;i<n.data[0].fields.effect_modifiers.length;i++)getEffectModifiersURL="/api/dominion/effects/"+n.data[0].fields.effects[i]+"/modifiers/"+n.data[0].fields.effect_modifiers[i],getEffectModifierLevelsURL="/api/dominion/effects/"+n.data[0].fields.effects[i]+"/modifiers/"+n.data[0].fields.effect_modifiers[i]+"/levels/"+n.data[0].fields.effects_modifier_levels[i],f.push(t.get(getEffectModifiersURL,{cache:!0})),l.push(t.get(getEffectModifierLevelsURL,{cache:!0}));for(i=0;i<n.data[0].fields.disadvantages.length;i++)getDisadvantagesURL="/api/dominion/disadvantages/"+n.data[0].fields.disadvantages[i],getDisadvantageLevelsURL="/api/dominion/disadvantages/"+n.data[0].fields.disadvantages[i]+"/levels/"+n.data[0].fields.disadvantages_levels[i],c.push(t.get(getDisadvantagesURL,{cache:!0})),d.push(t.get(getDisadvantageLevelsURL,{cache:!0}));for(a.all(o).then(function(t){for(i=0;i<t.length;i++)e.techniqueEffectsJSON[i]=t[i].data},function(){e.techniqueEffectsJSON="error"}),a.all(s).then(function(t){for(i=0;i<t.length;i++)techniqueEffectLevelsJSON[i]=t[i].data;for(levelHoldArray=[],i=0;i<e.techniqueEffectsJSON.length;i++){for(j=0;j<techniqueEffectLevelsJSON.length;j++)e.techniqueEffectsJSON[i][0].pk==techniqueEffectLevelsJSON[j][0].fields.effect&&(levelHoldArray=techniqueEffectLevelsJSON[j]);e.techniqueEffectsJSON[i][0].level=levelHoldArray}},function(){techniqueEffectLevelsJSON="error"}),a.all(f).then(function(e){for(i=0;i<e.length;i++)techniqueEffectModifiersJSON[i]=e[i].data},function(){techniqueEffectModifiersJSON="error"}),a.all(l).then(function(t){for(i=0;i<t.length;i++)techniqueEffectModifiersLevelsJSON[i]=t[i].data;for(i=0;i<techniqueEffectModifiersJSON.length;i++)for(j=0;j<techniqueEffectModifiersLevelsJSON.length;j++)techniqueEffectModifiersJSON[i][0].pk==techniqueEffectModifiersLevelsJSON[j][0].fields.effect_modifier&&(techniqueEffectModifiersJSON[i][0].level=techniqueEffectModifiersLevelsJSON[j][0]);for(i=0;i<e.techniqueEffectsJSON.length;i++){for(modifierHoldArray=[],j=0;j<techniqueEffectModifiersJSON.length;j++)e.techniqueEffectsJSON[i][0].pk==techniqueEffectModifiersJSON[j][0].fields.effect&&modifierHoldArray.push(techniqueEffectModifiersJSON[j][0]);e.techniqueEffectsJSON[i][0].modifiers=modifierHoldArray}},function(){techniqueEffectModifiersJSON="error"}),a.all(c).then(function(t){for(i=0;i<t.length;i++)e.disadvantagesJSON[i]=t[i].data;return a.all(d)},function(){e.treeTechniquesJSON="error"}),a.all(d).then(function(t){for(i=0;i<t.length;i++)disadvantageLevelsJSON[i]=t[i].data;for(i=0;i<e.disadvantagesJSON.length;i++)for(j=0;j<disadvantageLevelsJSON.length;j++)e.disadvantagesJSON[i].pk==disadvantageLevelsJSON[j].disadvantage&&(e.disadvantagesJSON[i][0].level=disadvantageLevelsJSON[j])},function(){e.disadvantagesJSON="error"}),e.cost="",e.maint="",abilityNames=["Strength","Dexterity","Agility","Constitution","Power","Will"],abilityCosts=[],abilityCosts[0]=e.techniqueJSON[0].fields.str_cost,abilityCosts[1]=e.techniqueJSON[0].fields.dex_cost,abilityCosts[2]=e.techniqueJSON[0].fields.agi_cost,abilityCosts[3]=e.techniqueJSON[0].fields.con_cost,abilityCosts[4]=e.techniqueJSON[0].fields.pow_cost,abilityCosts[5]=e.techniqueJSON[0].fields.will_cost,abilityMaints=[],abilityMaints[0]=e.techniqueJSON[0].fields.str_maint,abilityMaints[1]=e.techniqueJSON[0].fields.dex_maint,abilityMaints[2]=e.techniqueJSON[0].fields.agi_maint,abilityMaints[3]=e.techniqueJSON[0].fields.con_maint,abilityMaints[4]=e.techniqueJSON[0].fields.pow_maint,abilityMaints[5]=e.techniqueJSON[0].fields.will_maint,i=0;i<6;i++)abilityCosts[i]>0&&(e.cost=e.cost+abilityNames[i]+" "+abilityCosts[i]+"; "),abilityCosts[i]>0&&(e.maint=e.maint+abilityNames[i]+" "+abilityMaints[i]+"; ")}},function(){e.treeJSON="error"})}]),dominionApp.controller("disadvantagesController",function(e,t){getURL="/api/dominion/disadvantages/",e.disadvantagesJSON={},t.get(getURL,{cache:!0}).then(function(t){e.disadvantagesJSON=t.data},function(){e.disadvantagesJSON="error"})}),dominionApp.controller("disadvantageController",["$scope","$http","$stateParams","$q",function(e,t,i){getURL="/api/dominion/disadvantages/"+i.disadvantageId,e.disadvantageJSON={},t.get(getURL,{cache:!0}).then(function(n){e.disadvantageJSON=n.data,getLevelsURL="/api/dominion/disadvantages/"+i.disadvantageId+"/levels/",e.disadvantageLevelsJSON={},t.get(getLevelsURL,{cache:!0}).then(function(t){e.disadvantageLevelsJSON=t.data},function(){e.disadvantageLevelsJSON="error"})},function(){e.disadvantageJSON="error"})}]);